<!DOCTYPE html>
<html>
<head><title>Suggest Video</title><link rel="stylesheet" href="style.css" /></head>
<body>
<form class="form" onsubmit="event.preventDefault();handleSuggest();">
<h2>Suggest YouTube Link</h2>
<input id="ytlink" placeholder="https://www.youtube.com/watch?v=dQw4w9WgXcQ" />
<button>Submit</button>
</form>
<div id="message"></div>
<script>
function handleSuggest() {
  const link = document.getElementById('ytlink').value;
  if (link.includes('youtube.com/watch?v=')) {
    const id = link.split('v=')[1];
    fetch('data/videos.json')
      .then(res => res.json())
      .then(videos => {
        if (!videos.includes(id)) {
          videos.push(id);
          fetch('data/videos.json', {
            method: 'POST',
            body: JSON.stringify(videos)
          });
        }
        document.getElementById('message').innerText = "Added!";
      });
  } else {
    fetch('data/garbage_suggestions.txt', {
      method: 'POST',
      body: link + '\n'
    });
    document.getElementById('message').innerText = "What the hell did you just paste?";
  }
}
</script>
</body>
</html>